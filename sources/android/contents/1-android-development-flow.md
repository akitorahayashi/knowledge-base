---
title: Androidアプリ開発：環境構築からユーザーの手元での実行まで
description: PCのセットアップからAndroidアプリを開発し、Google Playストアを通じてユーザーに届けるまでの流れをまとめたものです。
date: 2025-07-16
lastUpdated: true
---

# Androidアプリ開発：環境構築からユーザーの手元での実行まで
このドキュメントは、PCのセットアップからAndroidアプリを開発し、Google Playストアを通じてユーザーに届けるまでの流れをまとめたものです。

## 1. 開発環境の構築 (PCのセットアップ)
全ての開発の土台となる、PC環境を整えるステップです。

### 1-1. 基本ツールの準備
- **Homebrew**: macOS用のパッケージ管理ツール。Javaなどを簡単にインストールするために使用。
- **Git**: ソースコードの変更履歴を管理するバージョン管理システム。

### 1-2. Java開発環境 (JDK) と実行基盤 (JVM)
- **JDK (Java Development Kit) のインストール**: `temurin`などをHomebrewでインストールします。
- **JAVA_HOME の設定**: PCにJavaの場所を教えるための環境変数を設定します。
- **開発環境の実行基盤 (JVM)**: JDKをインストールすると、JVM (Java仮想マシン) もセットアップされます。このJVMは、開発PC上で動作する全てのツールの「実行エンジン」です。Android Studio、Gradle、各種コンパイラ（Kotlin, Java, D8）はすべてJVM上で動くJavaアプリケーションであり、開発とビルドの全行程はこのJVMという土台の上で実行されます。
- **役割分担の明確化**: 開発PCではJVMが全てのツールを動かし、完成したアプリがユーザーのスマートフォンに渡って初めてART (Android Runtime) がそのアプリを動かします。AOTやJITコンパイルは、デバイス上でARTが行う最適化であり、PC上のJVMがビルド中に行うものではありません。

### 1-3. Android Studio (統合開発環境)
- **Android Studioのインストール**: コーディング、デバッグ、ビルドなど、開発に必要な全ての機能が詰まった公式IDE。
- **SDK Managerの設定**: SDK Manager自体のバージョンによる違いは、開発者が日常的に意識することはほとんどありません。SDK Managerはあくまで**「管理ツール（マネージャー）」です。重要なのは、SDK Managerが管理している中身（コンポーネント）のバージョン**です。
  - **SDK Platforms**: 開発対象とするAndroid OSバージョン（APIレベル）をインストールします。
  - **SDK Tools**: 開発を補助するツール群を管理します。
    - **Android SDK Build-Tools**: アプリのビルドに不可欠なツール群です。これには、JavaバイトコードをDEX形式に変換するD8コンパイラや、リソースを梱包するAAPT2などが含まれます。使用するBuild-ToolsのバージョンはプロジェクトのGradleファイルで指定され、SDK Managerはその指定に基づいて必要なバージョンをダウンロード・管理します。
    - **Android Emulator**: 開発中のアプリをテストするための仮想デバイス。
    - **Android SDK Platform-Tools**: `adb`コマンドなど、PCとデバイスを接続してデバッグするためのツール。
- **エミュレータの作成**: SDK Managerでインストールしたツールを使い、テスト用の仮想Androidデバイスを作成します。

## 2. アプリケーションの開発とビルド
コードを書き、それをアプリの形に変換するステップです。

### 2-1. コーディング
- **言語**: Kotlinを使ってアプリのロジックやUIを記述する。Googleが公式に推奨する現代的なプログラミング言語で、Javaとの100%の相互運用性を持つ。
- **API**: SDK ManagerでインストールしたAndroid API（機能のルールブック）を利用して、OSの機能（カメラ、通知など）を呼び出す。

### 2-2. ビルドプロセス (Gradleによる自動化)
ビルドボタンを押すと、以下の処理が自動的に実行されます。
1.  **依存ライブラリの取得 (初回のみ)**
    - Gradleが、`build.gradle.kts`ファイルに定義されたバージョンに基づき、必要なライブラリをインターネット上の公開リポジトリ（Maven Centralなど）からダウンロードし、PCのGradleキャッシュに保存する。
    - **Kotlinコンパイラと標準ライブラリ**: これらはJDKには含まれないため、このステップでGradleが自動的に取得する。これにより、プロジェクトごとに異なるバージョンのKotlinを利用できる。
2.  **コンパイル (ソースコード → バイトコード)**
    - `.kt`ファイル → Kotlinコンパイラ (K2) → Javaバイトコード (`.class`)
    - Kotlinコンパイラは、KotlinのソースコードをJavaのソースコードに変換するのではなく、直接Javaバイトコードにコンパイルする。
    - `.java`ファイル → Javaコンパイラ (JDKの一部) → Javaバイトコード (`.class`)
    - ※この2つのコンパイラはそれぞれ独立して動作し、成果物であるJavaバイトコードを同じ場所に集める。
3.  **DEXファイルへの変換**
    - 全てのJavaバイトコード (`.class`) → D8コンパイラ → DEX (Dalvik Executable) ファイル
    - ※DEXはAndroidの実行環境（ART）が理解できる形式。D8コンパイラは、SDK Managerが管理するAndroid SDK Build-Toolsに含まれるツールです。
4.  **パッケージング (部品を一つのアプリにまとめる)**
    - AAPT2 (Android Asset Packaging Tool 2) が、これまでの工程で作成されたDEXファイル、リソースファイル（画像、レイアウトなど）、`AndroidManifest.xml`などを一つのアプリとして梱包（パッケージング）します。この際、リソースはAndroidが読みやすいように最適化されます。AAPT2もAndroid SDK Build-Toolsの一部です。

このプロセスの最終的な成果物が、インストール可能なAPKや公開用のAABファイルです。
- **APK (Android Package Kit)**: Androidデバイスに直接インストールして実行できる、アプリの完成形パッケージです。DEXファイル、リソース、マニフェストファイルなどがすべて含まれています。
- **AAB (Android App Bundle)**: Google Playにアップロードするための配布用フォーマット。

## 3. テストとデバッグ
作成したアプリが正しく動作するかを確認し、問題を修正するステップです。
- **デバッグ**: Android Studioのデバッガーを使い、作成したエミュレータまたはUSB接続した実機でアプリを実行。
- **ADB (Android Debug Bridge)** を通じて、アプリの動作状況の確認やログの監視、ファイルの送受信などを行う。

## 4. リリースとユーザーへの配布
完成したアプリを、世界中のユーザーに届ける最終ステップです。

### 4-1. Google Playへのアップロード
- 開発者アカウントを作成し、完成したAAB (Android App Bundle) ファイルをGoogle Play Consoleにアップロードします。
- **AABとは**: アプリの全てのコードとリソース（画像、言語ファイルなど）を含んだ「公開用フォーマット」です。これをアップロードすると、Google Playが各ユーザーのデバイス（画面サイズ、CPUの種類、言語設定など）に合わせて、不要な部分を削ぎ落とした最適なAPKを自動的に生成して配信します。これにより、ユーザーがダウンロードするアプリのサイズを最小限に抑えることができます。
- ストア掲載用のスクリーンショットや説明文なども準備する。

### 4-2. ユーザーの手元での実行
1.  **インストール**: ユーザーがGoogle Playストアからアプリをインストールする。Google Playは、そのユーザーのデバイスに最適化されたAPKをAABから自動生成して配信する。
2.  **実行**: ユーザーがアプリアイコンをタップする。
    - **ART (Android Runtime)** がアプリを実行する。
      - **AOT (事前コンパイル)**: インストール時などに、コードの一部をあらかじめ機械語に翻訳し、起動を高速化。
      - **JIT (実行時コンパイル)**: アプリの実行中に、よく使われる部分をリアルタイムで機械語に翻訳し、動作を最適化。

以上が、環境構築からユーザーの手元での実行までの全行程です。

---
<br>
<div style="text-align: right;">2025/7/16 Gemini 2.5 Proを使って作成</div>
